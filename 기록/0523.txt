======================================================
5월 21일
ObjectStreamClass$Caches로부터 soft references를 폐기하지 못했습니다
java.io.ObjectStreamClass$Caches$1 and java.util.Map are in module java.base of loader 'bootstrap'

java.util.Map are in module java.base of loader 'bootstrap'
java.util.Map은 로더 'bootstrap'의 모듈 java.base에 있습니다.


------------>>
 mapper.xml의 resultType을 잘못설정해서 나는 오류이다.
service랑 mapper.java를 다 boolean으로 설정해놨는데
mapper.xml에서 boolean 이 아닌 int형으로 햇더니
오류가 났다.
boolean으로 바꿔주니 오류해결

parameterType="HashMap"
==========================================================================

business-layer.xml 설정 관련 기록


<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

	<!--  스프링 컨테이너가 생성할 객체 등록 -->


	<!-- Annotation 기반의 IoC 설정 -->
	<context:component-scan base-package="com.ssamz.biz"/>

</beans>

 
==========================================================================
0521 성공 로그 기록


5월 21, 2023 6:32:02 오후 org.apache.catalina.core.AprLifecycleListener lifecycleEvent
정보: 프로덕션 환경들에서 최적의 성능을 제공하는, APR 기반 Apache Tomcat Native 라이브러리가, 다음 java.library.path에서 발견되지 않습니다:  
5월 21, 2023 6:32:04 오후 org.apache.coyote.AbstractProtocol init
정보: 프로토콜 핸들러 ["http-nio-8080"]을(를) 초기화합니다.
5월 21, 2023 6:32:08 오후 org.apache.catalina.startup.Catalina load
정보: [7709] 밀리초 내에 서버가 초기화되었습니다.
5월 21, 2023 6:32:09 오후 org.apache.catalina.core.StandardService startInternal
정보: 서비스 [Catalina]을(를) 시작합니다.
5월 21, 2023 6:32:09 오후 org.apache.catalina.core.StandardEngine startInternal
정보: 서버 엔진을 시작합니다: [Apache Tomcat/9.0.46]
5월 21, 2023 6:32:15 오후 org.apache.catalina.util.SessionIdGeneratorBase createSecureRandom
경고: [SHA1PRNG] 알고리즘을 사용하여, 세션 ID를 생성하기 위한 SecureRandom 객체를 생성하는데, [4,725] 밀리초가 소요됐습니다.
5월 21, 2023 6:32:38 오후 org.apache.jasper.servlet.TldScanner scanJars
정보: 적어도 하나의 JAR가 TLD들을 찾기 위해 스캔되었으나 아무 것도 찾지 못했습니다. 스캔했으나 TLD가 없는 JAR들의 전체 목록을 보시려면, 로그 레벨을 디버그 레벨로 설정하십시오. 스캔 과정에서 불필요한 JAR들을 건너뛰면, 시스템 시작 시간과 JSP 컴파일 시간을 단축시킬 수 있습니다.
5월 21, 2023 6:32:38 오후 org.apache.catalina.core.ApplicationContext log
정보: No Spring WebApplicationInitializer types detected on classpath
5월 21, 2023 6:32:39 오후 org.apache.catalina.core.ApplicationContext log
정보: Initializing Spring root WebApplicationContext
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: SpringProject]
INFO : org.hibernate.Version - HHH000412: Hibernate ORM core version 5.5.6
INFO : org.hibernate.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
INFO : org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
Hibernate:

    drop table if exists BOARD CASCADE
Hibernate:

    drop sequence if exists hibernate_sequence
Hibernate: create sequence hibernate_sequence start with 1 increment by 1
Hibernate:

    create table BOARD (
       seq integer not null,
        cnt integer not null,
        content varchar(255),
        regDate date,
        title varchar(255),
        writer varchar(255),
        primary key (seq)
    )
 
==========================================================================
pom.xml에서 자바 버전 중복되어 오류

==========================================================================
실행환경은 자바 11 / 톰켓 9 을 맞춰놓고 실행환경 오류 해결 
One or more constraints have not been satisfied.

Dynamic Web Module 4.0 requires Java 1.8 or newer.

	<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>2.5.1</version>
				<configuration>
					<source>11</source>
					<target>11</target>
					<compilerArgument>-Xlint:all</compilerArgument>
					<showWarnings>true</showWarnings>
					<showDeprecation>true</showDeprecation>
				</configuration>
			</plugin>

java.lang.NoClassDefFoundError: javax/servlet/ServletContextListener

tomcat10 버전을 사용했는데 javax가 tomcat9까지 지원한다고 해서

9로 다운그레이드 해서 해결했다!

 

===========================================================================> 
0521_밤10시23분 우선 실행은 됨 : 게시판 프로그램 화면까지는 뜸 > 로그인까지 뜸

login.do 에서
 Message: Handler dispatch failed; nested exception is java.lang.NoSuchMethodError: 'java.lang.Object org.springframework.transaction.support.TransactionSynchronizationManager.unbindResourceIfPossible(java.lang.Object)'


 modify한 코드 위치 : F:\2023\springproject_alpha_pre_backup\src\main\java\com\min\project
현재 기준 프로젝트 : C:\DEV\eclipse-workspace\git\Spring_project\0522_TransactionSynchronizationManager
실행환경은 자바 11 / 톰켓 9


==========================================================================
TransactionSynchronizationManager 가 MemberVO와 관련이 있는것 같아서 Member 소스를 JPA entityMapping 했으나 오류 발생

 Could not publish server configuration for Tomcat v9.0 Server at localhost.
Multiple Contexts have a path of "/biz".

ERROR: org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: No identifier specified for entity: com.min.biz.member.MemberVO
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactoryBean' defined in class path resource [business-layer.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: No identifier specified for entity: com.min.biz.member.MemberVO




java.map > bootstrap.jar 문제 해결방법 

c:DEV>eclipse>springproject_success 마이그레이션


WARN : org.springframework.web.servlet.PageNotFound - No mapping for GET /biz/login.do


> web.xml 수정



share the same JPA entity name

java.lang.NoClassDefFoundError: javax/servlet/ServletContextListener

5월 21, 2023 5:31:24 오후 org.apache.catalina.loader.WebappClassLoaderBase clearReferencesObjectStreamClassCaches
경고: 웹 애플리케이션 [biz]을(를) 위해, ObjectStreamClass$Caches로부터 soft references를 폐기하지 못했습니다.

java.lang.ClassCastException: class java.io.ObjectStreamClass$Caches$1 cannot be cast to class java.util.Map (java.io.ObjectStreamClass$Caches$1 and java.util.Map are in module java.base of loader 'bootstrap')




=================================================

프로젝트 우클릭 > Properties 
1. Project Facets : Java 11 , runtime zulu11
2. JavaBuildPath : Libraries 에서 톰켓 9 관련 jar 추가 , order and Export 에서 JRE JAVA11 이랑 jar apply

3. Project 탭 > clean 
4. 프로젝트 우클릭 > Maven > update
5. Servers 더블클릭 > Timeout > start 100



====================================================
0523

jsp 오류 : <jsp:include page="project/LodVariablePage.do" flush="false">
에서 page 경로 수정 필요


import org.springframework.web.servlet.view.json.MappingJacksonJsonView;
:: Maven dependency가 로드가 안되서 login/LoginPage 에서 오류 발생 

pom.xml에서 Maven 디펜던시를 다음과 같이 변경
그리고 컨트롤러에서 MappingJackson2JsonView으로 사용 

<!-- Jackson2 -->
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<version>2.9.4</version>
		</dependency>

		<!--MappingJacksonJsonView -->
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-core</artifactId>
			<version>2.4.3</version>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<version>2.4.3</version>
		</dependency>
 

Spring 4.0.0

		
		
	<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd">	
		
GsonHttpMessageConverter 지원 MappingJacksonHttpMessageConverter 미지원
'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter': 
Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: 
Failed to instantiate [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter]:
 Constructor threw exception; nested exception is java.lang.NoSuchMethodError: 'com.fasterxml.jackson.databind.ObjectMapper com.fasterxml.jackson.databind.ObjectMapper.addMixIn(java.lang.Class, java.lang.Class)'

ERROR: 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'boardDAOJPA':
 Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
 No qualifying bean of type 'javax.persistence.EntityManagerFactory' available

 
	<!-- jackson -->
		<dependency>
		    <groupId>com.fasterxml.jackson.core</groupId>
		    <artifactId>jackson-databind</artifactId>
		    <version>2.9.6</version>
		</dependency>
		
		
		
		
		
==================================================================================		
		
	 
0522 : BoardDAOJPA 파일 삭제 및 META-INF 에 있는 persistence.xml 삭제 
BoardDAOMybatis 파일로 BoardDAO 변수 지정 : BoardController 
		
		

WARN : org.springframework.web.context.support.XmlWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'boardDAOMyBatis': Unsatisfied dependency expressed through field 'mybatis'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}		
		

ERROR: org.springframework.beans.factory.UnsatisfiedDependencyException: 
Error creating bean with name 'boardDAOMyBatis':
 Unsatisfied dependency expressed through field 'mybatis'; 
 nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
 No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available: 
 expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}		
		
		
		
 	<!-- Transaction 설정 변경 : mybatis 기준 -->
 	<bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
 		<property name="dataSource" ref="dataSource"/>
 	</bean>	
		
 	<!-- Transaction 설정 -->
 	<bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
 		<property name="dataSource" ref="dataSource"/>
 	</bean>	
		
		 
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available: 
expected at least 1 bean which qualifies as autowire candidate.
 Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
		
		
1. 어노테이션을 정확하게 사용했는지
예를 들어 Service 로직에서 interface를 impleements해서 이용하는 경우가 많은데 이때 해당 로직이 @Service라는 것을 적어야 한다.

@Service 
public class ServiceImpl impleements Service {

@Autowired
private 변수 변수

...
}		
	

2. Store(DAO) -> @Repository
Controller -> @Controller


3. dispatcher-servlet.xml 수정
<mvc:annotation-driven/>
<context: component-scan base-package="controller/**"/>
<context: annotation-config/>
<context : component-scan base-package="service.impl/**"/>
<context:component-scan base-package="DAO/**" />
<context:annotation-config/>

beans를 생성하는 패키지에 있는 파일들을 확인하도록 설정 

4. @Autowired
오토와이어링을 시도하는 과정에서 빈이 없는 경우 : required=false or true 설정 

@Service 
public class ServiceImpl impleements Service {

@Autowired(required-false)
private userJsono userJ;

...
}	

와이어링 되지 않는 상태로 남는다.



	
==================================================================================
		
- component-scan 이란?

어노테이션을 클래스에 선언하면 스프링이 Bean으로 등록 될 준비를 마친 클래스들을 스캔하여

디폴트로 @Component @Controller @Service @Repository 를 Bean으로 등록해준다.

 

- component-scan 사용법

<context:component-scan base-package="패키지명"/>
위와 같이 설정하고 base package를 적으면 base package를 기준으로 클래스를 스캔해 빈으로 생성한다.		
		
- component-scan 동작 과정

ConfigurationClassParser 가 Configuration 클래스를 파싱한다.
@Configuration 어노테이션 클래스를 파싱하는 것이다.
                   
ComponentScan 설정을 파싱한다.
base-package 에 설정한 패키지를 기준으로
ComponentScanAnnotationParser가 스캔하기 위한 설정을 파싱한다.
                   
base-package 설정을 바탕으로 모든 클래스를 로딩한다.
                  
ClassLoader가 로딩한 클래스들을 BeanDefinition으로 정의한다.
생성할 빈의 대한 정의를 하는 것이다.
                   
생성할 빈에 대한 정의를 토대로 빈을 생성한다.		
		
		
https://yongku.tistory.com/entry/%EC%8A%A4%ED%94%84%EB%A7%81Spring-nested-exception-is-orgspringframeworkbeansfactoryNoSuchBeanDefinitionException-No-qualifying-bean-of-type-orgmybatisspringSqlSessionTemplate-available-expected-at-least-1-bean-which-qualifies-as-autowire-candidate-Dependency-annotations-orgspringframeworkbeansfactoryannotationAutowiredreq		
		
		
=========>@autowired 어노테이션은 같은 타입의 bean이 2개이상이면 안됩니다.

Resource만 쓰던가 @Qualifier로 이름을 지정해야돼요	

@Autowired
@Qualifier("객체")

또는
@Resource(name="객체이름")
	
BoardVO에 @JsonIgnore 빼먹음 > 추가	
		
		
WARN : org.springframework.web.context.support.XmlWebApplicationContext 
- Exception encountered during context initialization 
- cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: 
Error creating bean with name 'boardDAOMyBatis': 
Unsatisfied dependency expressed through field 'mybatis'; 
nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available: 
expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}		
		
경고: org.springframework.web.context.support.XmlWebApplicationContext
- 컨텍스트 초기화 중에 예외가 발생했습니다.
- 새로 고침 시도 취소: org.springframework.beans.factory.UnsatisfiedDependencyException:
이름이 'boardDAOMyBatis'인 빈 생성 오류:
'mybatis' 필드를 통해 표현되는 충족되지 않은 종속성;
중첩 예외는 org.springframework.beans.factory.NoSuchBeanDefinitionException입니다.
사용 가능한 'org.mybatis.spring.SqlSessionTemplate' 유형의 적격 빈이 없습니다.
autowire 후보로 적합한 최소 1개의 bean이 예상됩니다. 종속성 주석: {@org.springframework.beans.factory.annotation.Autowired(required=true)}		
		
1. Dao의 class 상단의 어노테이션 확인 @Repository 또는 @Service
2. xml에 bean으로 등록 dao, sql 
3. 코드추가
<bean id="sqlSession" class="org.mybatis.spring.SqlSessionFactorBean">
			<property name="dataSource" ref="dataSource" />
			<property name="configLocation" value="classpath:mybatis-config.xml">
			</bean>
			
				<bean id="SqlSessionTemplate" class="org.mybatis.spring.SqlSessionTemplate">
					<constructor-arg index="0" ref="sqlSession"/>
			</bean>
			<context:component-scan base-package="myybean">
				<context:exclude-filter type="annotation" expression="org.springframework.sterotype.Controller"/>
			</context:component-scan>
4.mybatis와 mybatis-spring 버전이 맞지 않아서 생김

<!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring -->
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis-spring</artifactId>
    <version>1.2.4</version>
</dependency>
<!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring -->
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis-spring</artifactId>
    <version>3.0.2</version>
</dependency>

<!-- https://mvnrepository.com/artifact/org.mybatis/mybatis -->
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis</artifactId>
    <version>3.3.1</version>
</dependency>

5. @Autowired 주입 실패 : Mapper를 제대로 받지 못해서 생김 -> root-context.xml에 <mybatis-spring:scan base-package="com.firstspring.web.mapper"/>
root-context.xml 위에 mybatis base-package 추가		
		
		<mybatis-spring:scan
		base-package="org.zerock.mapper" /> <!--추가-->

	<context:component-scan
		base-package="org.zerock.sample"></context:component-scan>
		
6. root-context.xml 파일에 다음 추가    

 <!--HikariCP Configration-->
        <bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource" destroy-method="close">
        <constructor-arg ref="hikariConfig"/>
        </bean>
        <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource"></property>
        </bean>
        
        <mybatis-spring:scan base-package="org.zeorck.mapper"/>
        
        <context:component-scan base-package="org.zeorck.sample"></context:component-scan>
	

*	https://lifere.tistory.com/117
		
*	https://velog.io/@virtualplastic/Spring-08-%EC%98%81%EC%86%8D%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EA%B3%84%EC%B8%B5%EC%9D%98-CRUD-%EA%B5%AC%ED%98%84
		src/main/resource 폴더에 org > zerock > mapper 폴더에 TimeMapper.xml 파일 

*https://tadaktadak-it.tistory.com/107

* https://mybatis.org/spring/ko/mappers.html#register //https://codingnojam.tistory.com/27

* https://gongzza.github.io/java/spring/spring-mybatis-h2-localtest/

* https://dololak.tistory.com/21 : 스프링 모듈 20가지 

그 중 asm 모듈은
 


ASM
ASM 모듈은 엄밀히 말해 스프링 모듈이 아닙니다.
ASM 모듈은 클래스 바이트코드 조작 및 분석 프레임워크인 ASM을 재 패키징한 모듈입니다.
ASM 프레임워크는 스프링 뿐 아니라 여러 프레임워크에서 및 라이브러리에서 사용되는데 이때 스프링 프레임워크와
ASM을 사용하는 다른 프레임워크와의 충돌을 방지하기 위해 org.springframework.asm 패키지로 재패키징해 독립적인 모듈로 제공합니다.

 
 	
 	
 		
 	<!-- Mybatis설정
 	     <mybatis-spring:scan base-package="com.min.biz.mapper" annotation="org.apache.ibatis.annotations.Mapper"/>
         -->
      <!-- MapperScannerConfigurer 사용 
        <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        	<property name="beanPackage" value="com.min.biz.mapper"/>
        	<property name="annotationClass" value="org.apache.ibatis.annotations.Mapper"/> 
        </bean>
7.log4jdbc-log4j2 설정을[spring] MyBatis 연동하기
 업데이트: May 23, 2021


8. Todo : MyMapper 예시만들기
9. log4jdbc 설정 

log4jdbc.log4j2.properties 파일 설정 
log4jdbc.spylogdelegator.name=net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator
log4jdbc.dump.sql.maxlinelength=0

pom.xml -> log4jdbc 관련

<!-- log4j2 -->
		<!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl -->
		<dependency>
			<groupId>org.apache.logging.log4j</groupId>
			<artifactId>log4j-slf4j-impl</artifactId>
			<version>2.17.2</version>
		</dependency>

		<!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core -->
		<dependency>
			<groupId>org.apache.logging.log4j</groupId>
			<artifactId>log4j-core</artifactId>
			<version>2.17.2</version>
		</dependency>


		<!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-api -->
		<dependency>
			<groupId>org.apache.logging.log4j</groupId>
			<artifactId>log4j-api</artifactId>
			<version>2.17.2</version>
		</dependency>
 
log4jdbc-log4j2 설정
MyBatis는 내부적으로 JDBC의 PreparedStatement를 이용해서 SQL을 처리한다. 따라서 SQL에 전달되는 파라미터는 JDBC에서와 같이 ‘?’로 치환되어 처리된다. 이럴 경우 값이 제대로 처리 되었는지 확인하기가 쉽지 않고, 실행된 SQL의 내용을 정확히 확인하기 어렵다. SQL 로그를 제대로 보기 위해서는 log4jdbc-log4j2 라이브러리를 사용해야 한다.

<!-- pom.xml -->


<!-- https://mvnrepository.com/artifact/org.bgee.log4jdbc-log4j2/log4jdbc-log4j2-jdbc4 -->
<dependency>
    <groupId>org.bgee.log4jdbc-log4j2</groupId>
    <artifactId>log4jdbc-log4j2-jdbc4</artifactId>
    <version>1.16</version>
</dependency>

mybatis는 내부적으로 jdbc의 preparedStatement를 이용해서 sql을 처리 
sql전달되는 파라미터는 JDBC와 같이 ?로 치환되어 처리, 이럴 경우 값이 제대로 처리되었는지 확인하기가 쉽지 않다 . 	
		
		
		
		
		
==================================================================================

----------> 
		
그럼에도 불구하고 이 오류가 뜸...		
5월 23, 2023 7:36:13 오후 org.apache.catalina.core.ApplicationContext log
심각: 서블릿 [appServlet]을(를) 위한 Servlet.init() 호출이 예외를 발생시켰습니다.
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'boardDAOMyBatis': Unsatisfied dependency expressed through field 'mybatis'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available: expecte
		
==================================================================================







board-mapping.xml 
<mapper namespace="Board">


19:55:34.128 [main] ERROR org.springframework.web.servlet.DispatcherServlet - Context initialization failed
org.springframework.beans.factory.UnsatisfiedDependencyException:
 Error creating bean with name 'boardDAOMyBatis': 
 Unsatisfied dependency expressed through field 'mybatis';
 nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
 No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available: 
 expected at least 1 bean which qualifies as autowire candidate. 
 Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
	

board-mapping.xml 
<mapper namespace="BoardDAO">

5월 23, 2023 7:57:23 오후 org.apache.catalina.core.ApplicationContext log
심각: 서블릿 [appServlet]을(를) 위한 Servlet.init() 호출이 예외를 발생시켰습니다.
org.springframework.beans.factory.UnsatisfiedDependencyException: 
Error creating bean with name 'boardDAOMyBatis': Unsatisfied dependency expressed through field 'mybatis'; 
nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}

<mapper namespace="BoardDAOMybatis">

5월 23, 2023 7:59:30 오후 org.apache.catalina.core.ApplicationContext log
심각: 서블릿 [appServlet]을(를) 위한 Servlet.init() 호출이 예외를 발생시켰습니다.
org.springframework.beans.factory.UnsatisfiedDependencyException: 
Error creating bean with name 'boardDAOMyBatis': 
Unsatisfied dependency expressed through field 'mybatis'; 
nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No qualifying bean of type 'org.mybatis.spring.SqlSessionTemplate' available:
 expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}

* repository 와 Mapper의 차이 
https://pamyferret.tistory.com/69

MVC에서 repository, mapper를 적용해보면 아래와 같이 구현하고자 하는 구조에 따라서 유동적으로 선택해서 사용하면 된다. Mapper만 썼으니 잘못됐어! Mapper 클래스 없이 Repository만 썼으니 잘못됐어! 이런건 없다.

- Controller -> Service -> Repository -> mapper.xml

- Controller -> Service -> Repository -> Mapper -> mapper.xml

- Controller -> Service -> Mapper -> mapper.xml

 

    <tx:annotation-driven transaction-manager="transactionManager" />
 
    <beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <beans:property name="driverClassName" value="org.mariadb.jdbc.Driver" />
        <beans:property name="url" value="jdbc:mariadb://127.0.0.1:3306/test" />
        <beans:property name="username" value="username" />
        <beans:property name="password" value="password" />
    </beans:bean>
 
    <beans:bean id="sqlSession" class="org.mybatis.spring.SqlSessionFactoryBean">
        <beans:property name="dataSource" ref="dataSource" />
        <beans:property name="mapperLocations" value="classpath:query/*.xml" />
        <beans:property name="configLocation" value="classpath:mybatis/mybatis-config.xml" />
        <!--본인의 패키지 명으로 변경 -->
        <beans:property name="typeAliasesPackage" value="com.yeopbox"/>
    </beans:bean>
 
    <beans:bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <!--본인의 패키지 명으로 변경 -->
        <beans:property name="basePackage" value="com.yeopbox.**.mapper" />
    </beans:bean>
 
    <beans:bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <beans:property name="dataSource" ref="dataSource" />
    </beans:bean>
</beans:beans>


resource/mybatis 경로에 mybatis-config.xml 파일을 생성한 뒤 아래 항목을 복사해 줍니다.

<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
    <settings>
        <setting name="cacheEnabled" value="true" />
        <setting name="lazyLoadingEnabled" value="false" />
        <setting name="multipleResultSetsEnabled" value="true" />
        <setting name="useColumnLabel" value="true" />
        <setting name="useGeneratedKeys" value="false" />
        <setting name="defaultExecutorType" value="SIMPLE" />
        <setting name="defaultStatementTimeout" value="60000" />
        <setting name="safeRowBoundsEnabled" value="false" />
        <setting name="mapUnderscoreToCamelCase" value="false" />
        <setting name="localCacheScope" value="SESSION" />
        <setting name="jdbcTypeForNull" value="VARCHAR" />
        <setting name="lazyLoadTriggerMethods" value="equals,clone,hashCode,toString" />
    </settings>
</configuration>



resource/query 경로에 main.xml이라는 매퍼 XML 파일을 생성합니다.

getCurTime은 현재 DB의 시간을 받아오는 쿼리로 간단하게 만들어 보았습니다.

main.xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yeopbox.main.mapper.MainMapper">
    <select id="getCurTime" resultType="mainVo">
        select current_timestamp as curTime
    </select>
</mapper>


* https://yeopbox.com/spring-mybatis%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-db-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0/



<select id="getGood" resultType="mybatis.Good 또는 java.util.Map" parameterType="java.lang.Integer">
select code, name, manufacture, price
from goods
where code=#{code}
</select>














----------> TODO 리스트

login_proc , ExcelPage1, AopAfter 코드 해석하기 > 주석 넣기
 

카탈리나가뭐지??
ibatis와 마이바티스 차이가 뭘까?













